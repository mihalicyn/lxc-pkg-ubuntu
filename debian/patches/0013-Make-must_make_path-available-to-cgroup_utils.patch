From 1a134af7aa3a594a65529523bcb36dd7f8713cf4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@ubuntu.com>
Date: Tue, 22 Aug 2017 18:52:33 -0400
Subject: Make must_make_path available to cgroup_utils
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: St√©phane Graber <stgraber@ubuntu.com>
---
 src/lxc/cgroups/cgfsng.c       | 4 ++--
 src/lxc/cgroups/cgroup_utils.c | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/lxc/cgroups/cgfsng.c b/src/lxc/cgroups/cgfsng.c
index dfb2c59c..24209ba0 100644
--- a/src/lxc/cgroups/cgfsng.c
+++ b/src/lxc/cgroups/cgfsng.c
@@ -261,7 +261,7 @@ struct hierarchy *get_hierarchy(const char *c)
 	return NULL;
 }
 
-static char *must_make_path(const char *first, ...) __attribute__((sentinel));
+char *must_make_path(const char *first, ...) __attribute__((sentinel));
 
 #define BATCH_SIZE 50
 static void batch_realloc(char **mem, size_t oldlen, size_t newlen)
@@ -1200,7 +1200,7 @@ out_free:
  * Concatenate all passed-in strings into one path.  Do not fail.  If any piece is
  * not prefixed with '/', add a '/'.
  */
-static char *must_make_path(const char *first, ...)
+char *must_make_path(const char *first, ...)
 {
 	va_list args;
 	char *cur, *dest;
diff --git a/src/lxc/cgroups/cgroup_utils.c b/src/lxc/cgroups/cgroup_utils.c
index c09ba168..0cba7ca8 100644
--- a/src/lxc/cgroups/cgroup_utils.c
+++ b/src/lxc/cgroups/cgroup_utils.c
@@ -32,6 +32,8 @@
 #include "cgroup_utils.h"
 #include "utils.h"
 
+char *must_make_path(const char *first, ...) __attribute__((sentinel));
+
 bool is_cgroupfs_v1(char *line)
 {
 	char *p = strstr(line, " - ");
