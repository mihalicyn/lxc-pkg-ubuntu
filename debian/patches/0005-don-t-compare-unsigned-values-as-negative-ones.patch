From e112c4277fec2c29e569fa9e8b67b763aa88ef03 Mon Sep 17 00:00:00 2001
From: Tycho Andersen <tycho.andersen@canonical.com>
Date: Mon, 13 Apr 2015 16:43:30 -0600
Subject: don't compare unsigned values as negative ones
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Instead, check that the result is larger than its parts.

Signed-off-by: Tycho Andersen <tycho.andersen@canonical.com>
Acked-by: St√©phane Graber <stgraber@ubuntu.com>
---
 src/lxc/utils.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/lxc/utils.c b/src/lxc/utils.c
index 084b556..fe71e9a 100644
--- a/src/lxc/utils.c
+++ b/src/lxc/utils.c
@@ -1645,12 +1645,13 @@ int setproctitle(char *title)
 			env_start = env_end;
 		}
 
+		arg_end = arg_start + len;
+
 		/* check overflow */
-		if (arg_start + len < 0) {
+		if (arg_end < len || arg_end < arg_start) {
 			return -1;
 		}
 
-		arg_end = arg_start + len;
 	}
 
 	strcpy((char*)arg_start, title);
