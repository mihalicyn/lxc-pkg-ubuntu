Description: Add autostart support to LXC
 Autostart isn't currently upstream yet, so we need a patch to lxc-destroy
 and lxc-ls to properly managed the flag.
Author: St√©phane Graber <stgraber@ubuntu.com>
Origin: vendor
Forwarded: no

Index: trusty-lxc/src/lxc/lxc-ls
===================================================================
--- trusty-lxc.orig/src/lxc/lxc-ls	2013-11-15 16:18:52.392212673 -0500
+++ trusty-lxc/src/lxc/lxc-ls	2013-11-15 16:18:52.384212674 -0500
@@ -138,7 +138,8 @@
 parser.add_argument("--fancy", action="store_true",
                     help=_("use fancy output"))
 
-parser.add_argument("--fancy-format", type=str, default="name,state,ipv4,ipv6",
+parser.add_argument("--fancy-format", type=str, default="name,state,ipv4,ipv6"
+                                                        ",autostart",
                     help=_("comma separated list of fields to show"))
 
 parser.add_argument("--nesting", dest="nesting", action="store_true",
@@ -213,6 +214,11 @@
         entry['pid'] = "-"
         if container.init_pid != -1:
             entry['pid'] = str(container.init_pid)
+    if (os.path.exists("/etc/lxc/auto/%s.conf" % container_name) or
+            os.path.exists("/etc/lxc/%s" % container_name)):
+        entry['autostart'] = "YES"
+    else:
+        entry['autostart'] = "NO"
 
     # Get the IPs
     for family, protocol in {'inet': 'ipv4', 'inet6': 'ipv6'}.items():
