From fe218ca38358dd69dd51fca6433088ac631d6240 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?St=C3=A9phane=20Graber?= <stgraber@ubuntu.com>
Date: Sun, 29 Sep 2013 19:41:52 -0400
Subject: [PATCH] Fix crasher in get_ips
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Check that the interface structure is not NULL before trying to access
its members.

Signed-off-by: St√©phane Graber <stgraber@ubuntu.com>
---
 src/lxc/lxccontainer.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/lxc/lxccontainer.c b/src/lxc/lxccontainer.c
index 1b3f2f5..3a2ae92 100644
--- a/src/lxc/lxccontainer.c
+++ b/src/lxc/lxccontainer.c
@@ -1305,6 +1305,9 @@ static char** lxcapi_get_ips(struct lxc_container *c, char* interface, char* fam
 
 	/* Iterate through the interfaces */
 	for (tempIfAddr = interfaceArray; tempIfAddr != NULL; tempIfAddr = tempIfAddr->ifa_next) {
+		if (tempIfAddr->ifa_addr == NULL)
+			continue;
+
 		if(tempIfAddr->ifa_addr->sa_family == AF_INET) {
 			if (family && strcmp(family, "inet"))
 				continue;
-- 
1.8.3.2

