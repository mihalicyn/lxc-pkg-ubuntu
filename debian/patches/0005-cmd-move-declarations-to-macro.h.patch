From a2485c1563711a90665be523c247305d979daac3 Mon Sep 17 00:00:00 2001
From: Christian Brauner <christian.brauner@ubuntu.com>
Date: Sun, 19 Aug 2018 19:32:38 +0200
Subject: cmd: move declarations to macro.h

Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
---
 src/lxc/Makefile.am          |  1 +
 src/lxc/cmd/lxc_usernsexec.c | 11 +----------
 src/lxc/macro.h              |  9 +++++++++
 3 files changed, 11 insertions(+), 10 deletions(-)

diff --git a/src/lxc/Makefile.am b/src/lxc/Makefile.am
index c3f11176..573802cf 100644
--- a/src/lxc/Makefile.am
+++ b/src/lxc/Makefile.am
@@ -328,6 +328,7 @@ lxc_usernsexec_SOURCES = cmd/lxc_usernsexec.c \
 			 conf.c conf.h \
 			 list.h \
 			 log.c log.h \
+			 macro.h \
 			 namespace.c namespace.h \
 			 utils.c utils.h
 endif
diff --git a/src/lxc/cmd/lxc_usernsexec.c b/src/lxc/cmd/lxc_usernsexec.c
index 837ed342..35c00c8d 100644
--- a/src/lxc/cmd/lxc_usernsexec.c
+++ b/src/lxc/cmd/lxc_usernsexec.c
@@ -44,21 +44,12 @@
 #include "conf.h"
 #include "list.h"
 #include "log.h"
+#include "macro.h"
 #include "namespace.h"
 #include "utils.h"
 
-#ifndef MS_REC
-#define MS_REC 16384
-#endif
-
-#ifndef MS_SLAVE
-#define MS_SLAVE (1 << 19)
-#endif
-
 extern int lxc_log_fd;
 
-int unshare(int flags);
-
 static void usage(const char *name)
 {
 	printf("usage: %s [-h] [-m <uid-maps>] -- [command [arg ..]]\n", name);
diff --git a/src/lxc/macro.h b/src/lxc/macro.h
index 75c63c7c..8eb54f16 100644
--- a/src/lxc/macro.h
+++ b/src/lxc/macro.h
@@ -187,4 +187,13 @@ extern int __build_bug_on_failed;
 #define NLMSG_ERROR 0x2
 #endif
 
+/* mount */
+#ifndef MS_REC
+#define MS_REC 16384
+#endif
+
+#ifndef MS_SLAVE
+#define MS_SLAVE (1 << 19)
+#endif
+
 #endif /* __LXC_MACRO_H */
