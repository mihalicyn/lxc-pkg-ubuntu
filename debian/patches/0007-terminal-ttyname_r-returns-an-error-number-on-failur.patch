From 3ce9067ccbf0736c5aaf33428600166680bf8109 Mon Sep 17 00:00:00 2001
From: Christian Brauner <christian.brauner@ubuntu.com>
Date: Wed, 28 Jul 2021 17:25:38 +0200
Subject: terminal: ttyname_r() returns an error number on failure

In other words, how inconsistent can an API be?

Signed-off-by: Christian Brauner <christian.brauner@ubuntu.com>
---
 src/lxc/terminal.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/lxc/terminal.c b/src/lxc/terminal.c
index 2c73c8f27..8850a9687 100644
--- a/src/lxc/terminal.c
+++ b/src/lxc/terminal.c
@@ -950,7 +950,7 @@ static int lxc_terminal_create_native(const char *name, const char *lxcpath, str
 	}
 
 	ret = ttyname_r(terminal->pty, terminal->name, sizeof(terminal->name));
-	if (ret < 0) {
+	if (ret) {
 		SYSWARN("Failed to retrieve name of terminal pty");
 		goto err;
 	}
