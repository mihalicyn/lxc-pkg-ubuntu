#!/bin/bash
# set -ex

lxcpath=@LXCPATH@

if [ ! -r $lxcpath ]; then
    exit 0
fi

if [ $# -eq  0 ]; then
    echo "usage: $0 -n <name>"
    exit 1
fi

for i in $*; do
    case $i in
	-n)
	    name=$2; shift 2;;
    esac
done

if [ -z "$name" ]; then
    echo "usage: $0 -n <name>"
    exit 1
fi

if [ ! -d $lxcpath/$name ]; then
    echo "'$name' does not exists"
    exit 1
fi

if [ ! -r $lxcpath/$name ]; then
    echo "Can not access '$name', permission denied"
    exit 1
fi

if [ -h $lxcpath/$name/nsgroup ]; then
    ps $* -p $(cat $lxcpath/$name/nsgroup/tasks)
fi

